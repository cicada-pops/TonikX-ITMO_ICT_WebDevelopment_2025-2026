# Лабораторная работа 2: Реализация простого сайта средствами Django

В этой работе реализовано веб-приложение "Табло авиаперелетов" с использованием Django 5.2.6 и PostgreSQL.

## Техническое задание

**Цель:** Реализовать сайт используя Django 3 и PostgreSQL.

**Требуемый функционал:**
- Регистрация пользователей
- Просмотр и резервирование мест на рейсах
- Редактирование и удаление резервирований
- Административный интерфейс для управления рейсами и пассажирами
- Таблица всех пассажиров рейса
- Система отзывов с рейтингом (1-10)

## Архитектура приложения

### Модели данных

| Модель | Поля | Описание |
|--------|------|----------|
| **Airline** | `name`, `code` | Авиакомпании |
| **Flight** | `flight_number`, `airline`, `departure_time`, `arrival_time`, `flight_type`, `gate_number`, `origin`, `destination`, `capacity`, `price` | Рейсы |
| **Reservation** | `user`, `flight`, `seat_number`, `ticket_number`, `created_at` | Резервирования |
| **Review** | `user`, `flight`, `rating`, `text`, `created_at` | Отзывы |
| **UserProfile** | `user`, `phone`, `address` | Профили пользователей |

### Представления (Views)

- `flight_list` - Список рейсов с поиском и фильтрацией
- `flight_detail` - Детальная информация о рейсе
- `make_reservation` - Создание резервирования
- `edit_reservation` - Редактирование резервирования
- `cancel_reservation` - Отмена резервирования
- `user_reservations` - Список резервирований пользователя
- `add_review` - Добавление отзыва
- `register` - Регистрация пользователя
- `login`/`logout` - Аутентификация

## Реализованный функционал

###  Система аутентификации
- Регистрация с дополнительными полями (телефон, адрес)
- Вход/выход из системы
- Автоматическое создание профиля пользователя
- Защита страниц с `@login_required`

###  Управление рейсами
- Просмотр списка рейсов с пагинацией
- Поиск по номеру, авиакомпании, маршруту
- Фильтрация по типу рейса (вылет/прилет)
- Детальная информация о рейсе

###  Система бронирования
- Бронирование мест на рейсы
- **Множественные брони** на одном рейсе
- Редактирование и отмена бронирований
- Автоматическая генерация номеров билетов

###  Административный интерфейс
- Django Admin для всех моделей
- Регистрация пассажиров администратором
- Ввод номеров билетов через админ-панель

###  Система отзывов
- Добавление отзывов к рейсам
- Рейтинговая система (1-10 звезд)
- Расчет среднего рейтинга рейса
- Отображение всех отзывов

###  Пользовательский интерфейс
- Адаптивный дизайн с Bootstrap 5
- Современный интерфейс с иконками Font Awesome
- Уведомления и валидация форм

## Технические особенности

### База данных
- **СУБД:** PostgreSQL
- **ORM:** Django ORM с оптимизацией запросов
- **Миграции:** Автоматическое создание и применение

### Безопасность
- CSRF защита для всех форм
- Валидация на сервере и клиенте
- Встроенная система аутентификации Django

### Производительность
- Использование `select_related` и `prefetch_related`
- Пагинация больших списков
- Свойства моделей для вычислений

## Структура проекта

```
airline_board/
├── airline_board/          # Настройки проекта
│   ├── settings.py         # Конфигурация Django
│   ├── urls.py            # URL-роутер
│   └── wsgi.py            # WSGI конфигурация
├── flights/               # Основное приложение
│   ├── models.py          # Модели данных
│   ├── views.py           # Представления
│   ├── forms.py           # Формы
│   ├── admin.py           # Админ-панель
│   ├── urls.py            # URL-маршруты
│   ├── signals.py         # Сигналы Django
│   ├── templates/         # HTML шаблоны
│   └── management/        # Команды управления
├── requirements.txt       # Зависимости
└── manage.py             # Управляющий скрипт
```

## Установка и запуск

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Настройка PostgreSQL
```sql
CREATE DATABASE airline_board;
```

### 3. Применение миграций
```bash
python manage.py makemigrations
python manage.py migrate
```

### 4. Создание суперпользователя
```bash
python manage.py createsuperuser
```

### 5. Загрузка тестовых данных
```bash
python manage.py load_sample_data
```

### 6. Запуск сервера
```bash
python manage.py runserver
```

## Тестовые аккаунты

- **Администратор:** `admin` / `admin123`
- **Пользователи:** `user1` - `user5` / `password123`

## Заключение

Успешно реализовано полнофункциональное веб-приложение "Табло авиаперелетов" с использованием Django и PostgreSQL. Приложение включает все требуемые функции: систему аутентификации, бронирование мест, административный интерфейс, систему отзывов и современный пользовательский интерфейс.

**Основные достижения:**
- Полная реализация всех требований технического задания
- Современный и адаптивный пользовательский интерфейс
- Надежная система безопасности и валидации
- Оптимизированная работа с базой данных
- Расширенный функционал (множественные брони, расчет рейтинга)

**Технические навыки:**
- Работа с Django ORM и моделями данных
- Создание представлений и форм
- Настройка административного интерфейса
- Работа с PostgreSQL
- Создание адаптивных HTML-шаблонов
- Обработка сигналов Django
- Создание пользовательских команд управления